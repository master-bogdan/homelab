apiVersion: helm.cattle.io/v1
kind: HelmChartConfig
metadata:
  name: traefik
  namespace: kube-system
spec:
  valuesContent: |-
    # Enable Traefik's Kubernetes Gateway provider
    providers:
      kubernetesGateway:
        enabled: true
      # (optional) if you want to fully stop using Ingress objects:
      # kubernetesIngress:
      #   enabled: false

    # Keep standard entrypoints (k3s packaged Traefik already exposes these)
    additionalArguments:
      - "--entrypoints.web.address=:80"
      - "--entrypoints.websecure.address=:443"

    # Make sure the ports map to those entrypoints
    ports:
      web:
        port: 80
        expose: true
      websecure:
        port: 443
        expose: true
